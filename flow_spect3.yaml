meta:
  portal_url: "<completar>"
  requiere_vpn: true
  descripcion: "Abrir buscador, elegir tipo de documento, ingresar DNI, buscar y continuar"

pasos:
  - id: abrir_buscador_desde_icono
    pantalla: "Home"
    proposito: "Abrir el buscador desde el ícono del teléfono amarillo (barra superior, centro)"
    localizar:
      alternativas:
        - tooltip: "Búsqueda"
        - aria_label: "Búsqueda"
        - role: "button"
          icono: "teléfono"
    accion: "click"
    esperar:
      tipo: "elemento_visible"
      objetivo:
        por_texto: "Encontrar Comunicante Búsqueda CIM"

  - id: seleccionar_pestaña_cliente
    pantalla: "Encontrar Comunicante Búsqueda CIM"
    proposito: "Usar la pestaña Cliente"
    localizar:
      role: "tab|radio"
      por_texto: "Cliente"
    accion: "select"

  - id: seleccionar_tipo_documento_dni
    pantalla: "Encontrar Comunicante Búsqueda CIM"
    proposito: "Elegir 'Documento Nacional Identidad'"
    localizar:
      role: "combobox"
      etiqueta: "Tipo de Documento"
    accion: "select"
    valor: "Documento Nacional Identidad"

  - id: ingresar_dni
    pantalla: "Encontrar Comunicante Búsqueda CIM"
    proposito: "Ingresar el número de documento"
    localizar:
      role: "textbox"
      etiqueta: "Número de Documento"
    accion: "type"
    valor: "{{dni}}"

  - id: ejecutar_busqueda
    pantalla: "Encontrar Comunicante Búsqueda CIM"
    proposito: "Lanzar la búsqueda"
    preferencia: "enter"     # primaria
    alternativas:
      - tipo: "enter"        # presionar Enter en el campo
      - tipo: "click"        # click en botón si Enter no aplica
        localizar:
          por_texto: "Buscar ahora"
    esperar:
      tipo: "lista_cargada"
      objetivo:
        titulo_o_contenedor: "Búsqueda: Contacto y Suscripción"

  - id: seleccionar_primer_resultado
    pantalla: "Búsqueda: Contacto y Suscripción"
    proposito: "Abrir el primer resultado"
    localizar:
      lista:
        contenedor_por_titulo: "Búsqueda: Contacto y Suscripción"
    accion: "select_index"
    indice: 0
    esperar:
      tipo: "navegacion"